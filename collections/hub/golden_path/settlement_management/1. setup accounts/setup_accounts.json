{
  "name": "multi",
  "test_cases": [
    {
      "id": 1,
      "name": "Settlement_management",
      "requests": [
        {
          "id": 3,
          "description": "Get testingtoolkitdfsp account id",
          "apiVersion": {
            "minorVersion": 3,
            "majorVersion": 9,
            "type": "central_admin"
          },
          "operationPath": "/participants/{name}/accounts",
          "path": "/participants/testingtoolkitdfsp/accounts",
          "method": "get",
          "params": {
            "name": "testingtoolkitdfsp"
          },
          "url": "{$inputs.HOST_CENTRAL_LEDGER}",
          "headers": {
            "FSPIOP-Source": "{$inputs.fromFspId}"
          },
          "tests": {
            "assertions": [
              {
                "id": 1,
                "description": "Response code is 200",
                "exec": [
                  "expect(response.status).to.equal(200)"
                ]
              },
              {
                "id": 2,
                "description": "Account id not null",
                "exec": [
                  "expect(environment.participant1accountid).to.not.be.null;"
                ]
              }
            ]
          },
          "scriptingEngine": "javascript",
          "scripts": {
            "postRequest": {
              "exec": [
                "\r",
                "var jsonData = response.body;\r",
                "console.log(jsonData);\r",
                "    for(var i in jsonData) {\r",
                "        if((jsonData[i].ledgerAccountType === 'POSITION') ) {\r",
                "          \r",
                "environment.participant1accountid=jsonData[i].id;\r",
                "\r",
                "        }\r",
                "    }\r",
                "console.log(environment.participant1accountid);"
              ]
            }
          }
        },
        {
          "id": 4,
          "description": "Active account for testingtoolkit",
          "apiVersion": {
            "minorVersion": 3,
            "majorVersion": 9,
            "type": "central_admin"
          },
          "operationPath": "/participants/{name}/accounts/{id}",
          "path": "/participants/testingtoolkitdfsp/accounts/{$environment.participant1accountid}",
          "method": "put",
          "params": {
            "name": "testingtoolkitdfsp",
            "id": "{$environment.participant1accountid}"
          },
          "url": "{$inputs.HOST_CENTRAL_LEDGER}",
          "headers": {
            "FSPIOP-Source": "{$inputs.fromFspId}",
            "Content-Type": "application/json"
          },
          "tests": {
            "assertions": [
              {
                "id": 1,
                "description": "Response code is 200",
                "exec": [
                  "expect(response.status).to.equal(200)"
                ]
              }
            ]
          },
          "body": {
            "isActive": true
          }
        },
        {
          "id": 5,
          "description": "Get payeefsp account id",
          "apiVersion": {
            "minorVersion": 3,
            "majorVersion": 9,
            "type": "central_admin"
          },
          "operationPath": "/participants/{name}/accounts",
          "path": "/participants/payeefsp/accounts",
          "method": "get",
          "params": {
            "name": "payeefsp"
          },
          "url": "{$inputs.HOST_CENTRAL_LEDGER}",
          "headers": {
            "FSPIOP-Source": "{$inputs.fromFspId}"
          },
          "tests": {
            "assertions": [
              {
                "id": 1,
                "description": "Response code is 200",
                "exec": [
                  "expect(response.status).to.equal(200)"
                ]
              },
              {
                "id": 2,
                "description": "Account id not null",
                "exec": [
                  "expect(environment.participant2accountid).to.not.be.null;"
                ]
              }
            ]
          },
          "scriptingEngine": "javascript",
          "scripts": {
            "postRequest": {
              "exec": [
                "\r",
                "var jsonData = response.body;\r",
                "console.log(jsonData);\r",
                "    for(var i in jsonData) {\r",
                "        if((jsonData[i].ledgerAccountType === 'POSITION') ) {\r",
                "          \r",
                "environment.participant2accountid=jsonData[i].id;\r",
                "\r",
                "        }\r",
                "    }\r",
                "console.log(environment.participant2accountid);"
              ]
            }
          }
        },
        {
          "id": 6,
          "description": "Active account for payeefsp",
          "apiVersion": {
            "minorVersion": 3,
            "majorVersion": 9,
            "type": "central_admin"
          },
          "operationPath": "/participants/{name}/accounts/{id}",
          "path": "/participants/payeefsp/accounts/{$environment.participant2accountid}",
          "method": "put",
          "params": {
            "name": "payeefsp",
            "id": "{$environment.participant2accountid}"
          },
          "url": "{$inputs.HOST_CENTRAL_LEDGER}",
          "headers": {
            "FSPIOP-Source": "{$inputs.fromFspId}",
            "Content-Type": "application/json"
          },
          "tests": {
            "assertions": [
              {
                "id": 1,
                "description": "Response code is 200",
                "exec": [
                  "expect(response.status).to.equal(200)"
                ]
              }
            ]
          },
          "body": {
            "isActive": true
          }
        },
        {
          "id": 7,
          "description": "Get testfsp1 account id ",
          "apiVersion": {
            "minorVersion": 3,
            "majorVersion": 9,
            "type": "central_admin"
          },
          "operationPath": "/participants/{name}/accounts",
          "path": "/participants/testfsp1/accounts",
          "method": "get",
          "params": {
            "name": "testfsp1"
          },
          "url": "{$inputs.HOST_CENTRAL_LEDGER}",
          "headers": {
            "FSPIOP-Source": "{$inputs.fromFspId}"
          },
          "tests": {
            "assertions": [
              {
                "id": 1,
                "description": "Response code is 200",
                "exec": [
                  "expect(response.status).to.equal(200)"
                ]
              },
              {
                "id": 2,
                "description": "Account id not null",
                "exec": [
                  "expect(environment.participant3accountid).to.not.be.null;"
                ]
              }
            ]
          },
          "scriptingEngine": "javascript",
          "scripts": {
            "postRequest": {
              "exec": [
                "\r",
                "var jsonData = response.body;\r",
                "console.log(jsonData);\r",
                "    for(var i in jsonData) {\r",
                "        if((jsonData[i].ledgerAccountType === 'POSITION') ) {\r",
                "          \r",
                "environment.participant3accountid=jsonData[i].id;\r",
                "\r",
                "        }\r",
                "    }\r",
                "console.log(environment.participant3accountid);"
              ]
            }
          }
        },
        {
          "id": 8,
          "description": "Active account for testfsp1",
          "apiVersion": {
            "minorVersion": 3,
            "majorVersion": 9,
            "type": "central_admin"
          },
          "operationPath": "/participants/{name}/accounts/{id}",
          "path": "/participants/testfsp1/accounts/{$environment.participant3accountid}",
          "method": "put",
          "params": {
            "name": "testfsp1",
            "id": "{$environment.participant3accountid}"
          },
          "url": "{$inputs.HOST_CENTRAL_LEDGER}",
          "headers": {
            "FSPIOP-Source": "{$inputs.fromFspId}",
            "Content-Type": "application/json"
          },
          "tests": {
            "assertions": [
              {
                "id": 1,
                "description": "Response code is 200",
                "exec": [
                  "expect(response.status).to.equal(200)"
                ]
              }
            ]
          },
          "body": {
            "isActive": true
          }
        },
        {
          "id": 9,
          "description": "Get testfsp2 account id ",
          "apiVersion": {
            "minorVersion": 3,
            "majorVersion": 9,
            "type": "central_admin"
          },
          "operationPath": "/participants/{name}/accounts",
          "path": "/participants/testfsp2/accounts",
          "method": "get",
          "params": {
            "name": "testfsp2"
          },
          "url": "{$inputs.HOST_CENTRAL_LEDGER}",
          "headers": {
            "FSPIOP-Source": "{$inputs.fromFspId}"
          },
          "tests": {
            "assertions": [
              {
                "id": 1,
                "description": "Response code is 200",
                "exec": [
                  "expect(response.status).to.equal(200)"
                ]
              },
              {
                "id": 2,
                "description": "Account id not null",
                "exec": [
                  "expect(environment.participant3accountid).to.not.be.null;"
                ]
              }
            ]
          },
          "scriptingEngine": "javascript",
          "scripts": {
            "postRequest": {
              "exec": [
                "\r",
                "var jsonData = response.body;\r",
                "console.log(jsonData);\r",
                "    for(var i in jsonData) {\r",
                "        if((jsonData[i].ledgerAccountType === 'POSITION') ) {\r",
                "          \r",
                "environment.participant4accountid=jsonData[i].id;\r",
                "\r",
                "        }\r",
                "    }\r",
                "console.log(environment.participant4accountid);"
              ]
            }
          }
        },
        {
          "id": 10,
          "description": "Active account for testfsp1 Copy",
          "apiVersion": {
            "minorVersion": 3,
            "majorVersion": 9,
            "type": "central_admin"
          },
          "operationPath": "/participants/{name}/accounts/{id}",
          "path": "/participants/testfsp2/accounts/{$environment.participant4accountid}",
          "method": "put",
          "params": {
            "name": "testfsp2",
            "id": "{$environment.participant4accountid}"
          },
          "url": "{$inputs.HOST_CENTRAL_LEDGER}",
          "headers": {
            "FSPIOP-Source": "{$inputs.fromFspId}",
            "Content-Type": "application/json"
          },
          "tests": {
            "assertions": [
              {
                "id": 1,
                "description": "Response code is 200",
                "exec": [
                  "expect(response.status).to.equal(200)"
                ]
              }
            ]
          },
          "body": {
            "isActive": true
          }
        }
      ]
    }
  ]
}